# Arbeitsbericht – Host discovery und Port probing und scanning
 
**Name:** Aldin Mukic  
**Datum:** 24.11.2025  
**Fach:** ITSE Labor  
**Klasse:** 4AHITS

**Aufgabe:** [Port Probing und Scanning](https://www.franzmatejka.at/htl/doc/ITSI_4/lab/04_portscan.html)


---
 
## Inhaltsverzeichnis

1. [Übung: Host Discovery](#1-übung-host-discovery)
   1. [Aufgabenstellung](#aufgabenstellung)
   2. [Lösung](#lösung)

2. [Port Probing und Scanning](#2-port-probing-und-scanning)  
   2.1 [Übung: Port Probing](#21-übung-port-probing)  
      - Telnet  
      - Netcat  
      - Curl  
      - Port Probing Cheat Sheet  
   2.2 [Übung: Netcat Port Scan](#22-übung-netcat-port-scan)  
   2.3 [Übung: Nmap Port Scan](#23-übung-nmap-port-scan)  
      - Standard Scan  
      - Scan aller Ports  
      - Scan ohne Host-Discovery  
      - Service/Version Detection  
      - OS Detection  
      - Aggressive Scan  
      - Timing  
      - Ausgabe  
      - Reason  
      - Top Ports  
      - Was zeigt ein Portscan?  
   2.4 [Übung: Nmap Cheat Sheet](#24-übung-nmap-cheat-sheet)

 
---

# 1 Übung (host discovery) 

### Aufgabenstellung
 
nmap ist ein Tool zum network scanning. In einer ersten Phase (host discovery, ping scan oder ping sweep) ermittelt nmap alle aktiven Hosts.
 
**Aufgaben:**

- Recherchiere zur grundlegenden Anwendung von nmap für einen sogenannten ping scan (host discovery).
- Ermittle alle aktiven Hosts im Subnetz des Labor-Netzwerks mit nmap.

**Hinweise:**

- nmap benötigt als Argument den IP Adressbereich des Subnet in Präfix Notation (z.B.: 192.168.178.0/24)
- Mit der Option -sn führt nmap nur den ping scan durch (ansonsten wird automtisch auch die nächste, länger dauernde, Phase des scans ausgeführt)

### Lösung 
**Recherche:**

Für die Erkennung aktiver Geräte im Labor-Netzwerk wurde ein Ping-Scan mit nmap verwendet. Dabei kommt der Parameter -sn zum Einsatz, der ausschließlich die Host-Discovery durchführt (kein Portscan). Ein paar weitere:

- PE → ICMP Echo (klassischer Ping)

- PR → ARP-Ping (lokales Netz)

- PS80 → TCP-SYN-Ping an Port 80

- Pn → Host-Discovery überspringen (alle als „up“ behandeln)

Durch Eingabe des gesamten Subnetzes wurden alle erreichbaren Hosts im Netzwerk identifiziert.

```bash
$ sudo nmap -sn 192.168.7.0/24
```

# 2 Port probing und scanning

## 2.1 Übung (port probing)

IP MS: 192.168.7.51

### Aufgabenstellung

Verwende telnet um festzustellen ob ein ssh Server auf Metasploitable läuft.

```bash
──(kali㉿kali)-[~]
└─$ telnet 192.168.7.51 22   
Trying 192.168.7.51...
Connected to 192.168.7.51.
Escape character is '^]'.
SSH-2.0-OpenSSH_4.7p1 Debian-8ubuntu1
 
```

Finde Bezeichnung und die Versionsnummer des Web Servers auf Metasploitable heraus. 

**Auf 3 unterschiedliche Arten:**

***telnet:***

```bash
──(kali㉿kali)-[~]
└─$ telnet 192.168.7.51 80 
Trying 192.168.7.51...
Connected to 192.168.7.51.
Escape character is '^]'.

GET / HTTP/1.1
Host: 192.168.7.51

HTTP/1.1 200 OK
Date: Mon, 24 Nov 2025 11:29:06 GMT
Server: Apache/2.2.8 (Ubuntu) DAV/2
X-Powered-By: PHP/5.2.4-2ubuntu5.10
Content-Length: 891
Content-Type: text/html
 
```

***nc (netcat):***

```bash
┌──(kali㉿kali)-[~]
└─$ nc 192.168.7.51 80 << EOF
heredoc> GET / HTTP/1.1
heredoc> Host: 192.168.7.51
heredoc> 
heredoc> EOF
HTTP/1.1 200 OK
Date: Mon, 24 Nov 2025 11:30:49 GMT
Server: Apache/2.2.8 (Ubuntu) DAV/2
X-Powered-By: PHP/5.2.4-2ubuntu5.10
Content-Length: 891
Content-Type: text/html
```

Hinweis: der notwendige http request header kann am besten mit Hilfe eines Shell here-documents beschrieben werden.

***curl:***

```bash
┌──(kali㉿kali)-[~]
└─$ curl -I 192.168.7.51    
HTTP/1.1 200 OK
Date: Mon, 24 Nov 2025 11:31:43 GMT
Server: Apache/2.2.8 (Ubuntu) DAV/2
X-Powered-By: PHP/5.2.4-2ubuntu5.10
Content-Type: text/html
 
```

### Port Probing Cheat Sheet

#### 1) Telnet

**Port testen:**
```bash
telnet <IP> 22
```

**HTTP-Banner abfragen:**

```bash
telnet <IP> 80
GET / HTTP/1.0
```

#### 2) Netcat (nc)

**Port testen:**
```bash
nc -vz <IP> 22
```

**HTTP-Banner (Here-Document):**
```bash
nc <IP> 80 <<EOF
GET / HTTP/1.0

EOF
```

**Alternative:**
```bash
echo -e "GET / HTTP/1.0\n" | nc <IP> 80
``` 

#### 3) Curl

**HTTP-Server identifizieren:**
```bash
curl -I http://<IP>
```

**Verbose-Modus:**
```bash
curl -v http://<IP>
```

**Nur Header anzeigen:**

```bash
curl -s -D - http://<IP> -o /dev/null
```

#### Typische Ergebnisse

- **SSH-Banner:** liefert Informationen über die verwendete SSH-Version  
  *Beispiel: OpenSSH_4.7p1*

- **HTTP-Header:** gibt Auskunft über den Webserver und dessen Version  
  *Beispiel: Apache/2.2.8 (Ubuntu)*

## 2.2 Übung (netcat port scan)

### Aufgabenstellung

Ermittle mit Hilfe von netcat welche Ports zwischen 1 und 30 in der Metasploitable VM geöffnet sind – Hinweis: dies geht in einer einzigen Kommandozeile. Beschreibe kurz jeden gefundenen Dienst.


```bash
┌──(kali㉿kali)-[~]
└─$ nc -zv 192.168.7.51 1-30
192.168.7.51: inverse host lookup failed: Unknown host
(UNKNOWN) [192.168.7.51] 25 (smtp) open
(UNKNOWN) [192.168.7.51] 23 (telnet) open
(UNKNOWN) [192.168.7.51] 22 (ssh) open
(UNKNOWN) [192.168.7.51] 21 (ftp) open
 
```
Mit Hilfe von netcat wurde ein Port-Scan der Metasploitable-VM im Bereich 1–30 durchgeführt (nc -zv 192.168.7.51 1-30). Dabei wurden vier offene Ports gefunden:
FTP (Port 21): Dienst zum Dateiübertragungsprotokoll, oft für anonymen Zugriff konfiguriert.
SSH (Port 22): Sicherer Remote-Login-Dienst für verschlüsselte Shell-Verbindungen.
Telnet (Port 23): Unverschlüsselter Remote-Zugang, häufig als unsicherer Alt-Dienst genutzt.
SMTP (Port 25): Dienst zur Übertragung von E-Mails zwischen Servern.


## 2.3 Übung (nmap port scan)

### Aufgabenstellung

**Aufgaben:**

Führe einen port scan auf die Metasploitable VM durch. Analysiere das Ergebnis.

**Standard-Portscan:**
```bash
 nmap 192.168.7.51       
Starting Nmap 7.95 ( https://nmap.org ) at 2025-11-24 06:23 EST
Nmap scan report for 192.168.7.51
Host is up (0.0020s latency).
Not shown: 977 filtered tcp ports (no-response)
PORT     STATE SERVICE
21/tcp   open  ftp
22/tcp   open  ssh
23/tcp   open  telnet
25/tcp   open  smtp
53/tcp   open  domain
80/tcp   open  http
111/tcp  open  rpcbind
139/tcp  open  netbios-ssn
445/tcp  open  microsoft-ds
512/tcp  open  exec
513/tcp  open  login
514/tcp  open  shell
1099/tcp open  rmiregistry
1524/tcp open  ingreslock
2049/tcp open  nfs
2121/tcp open  ccproxy-ftp
3306/tcp open  mysql
5432/tcp open  postgresql
5900/tcp open  vnc
6000/tcp open  X11
6667/tcp open  irc
8009/tcp open  ajp13
8180/tcp open  unknown
```



Experimentiere mit den Optionen für (Victim ist Metasploitable VM):

**Scannen aller möglichen Ports.**
```bash
┌──(kali㉿kali)-[~]
└─$ nmap -p- 192.168.7.51
Starting Nmap 7.95 ( https://nmap.org ) at 2025-11-24 06:46 EST
Nmap scan report for 192.168.7.51
Host is up (0.0037s latency).
Not shown: 65505 closed tcp ports (reset)
PORT      STATE SERVICE
21/tcp    open  ftp
22/tcp    open  ssh
23/tcp    open  telnet
25/tcp    open  smtp
53/tcp    open  domain
80/tcp    open  http
111/tcp   open  rpcbind
139/tcp   open  netbios-ssn
445/tcp   open  microsoft-ds
512/tcp   open  exec
513/tcp   open  login
514/tcp   open  shell
1099/tcp  open  rmiregistry
1524/tcp  open  ingreslock
2049/tcp  open  nfs
2121/tcp  open  ccproxy-ftp
3306/tcp  open  mysql
3632/tcp  open  distccd
5432/tcp  open  postgresql
5900/tcp  open  vnc
6000/tcp  open  X11
6667/tcp  open  irc
6697/tcp  open  ircs-u
8009/tcp  open  ajp13
8180/tcp  open  unknown
8787/tcp  open  msgsrvr
52181/tcp open  unknown
52691/tcp open  unknown
55144/tcp open  unknown
57513/tcp open  unknown
MAC Address: 00:0C:29:3D:51:CE (VMware)

Nmap done: 1 IP address (1 host up) scanned in 5.75 seconds
 
```

**Überspringen Ping-Scan/Host-Discovery. Warum kann diese Option notwendig sein?**

```bash
┌──(kali㉿kali)-[~]
└─$ nmap -Pn 192.168.7.51
Starting Nmap 7.95 ( https://nmap.org ) at 2025-11-24 06:47 EST
Nmap scan report for 192.168.7.51
Host is up (0.0039s latency).
Not shown: 977 closed tcp ports (reset)
PORT     STATE SERVICE
21/tcp   open  ftp
22/tcp   open  ssh
23/tcp   open  telnet
25/tcp   open  smtp
53/tcp   open  domain
80/tcp   open  http
111/tcp  open  rpcbind
139/tcp  open  netbios-ssn
445/tcp  open  microsoft-ds
512/tcp  open  exec
513/tcp  open  login
514/tcp  open  shell
1099/tcp open  rmiregistry
1524/tcp open  ingreslock
2049/tcp open  nfs
2121/tcp open  ccproxy-ftp
3306/tcp open  mysql
5432/tcp open  postgresql
5900/tcp open  vnc
6000/tcp open  X11
6667/tcp open  irc
8009/tcp open  ajp13
8180/tcp open  unknown
MAC Address: 00:0C:29:3D:51:CE (VMware)

Nmap done: 1 IP address (1 host up) scanned in 0.29 seconds
   ```

nmap scannt den Host auch dann, wenn Ping blockiert ist.

**Service/Version Detection:**
```bash
nmap -sV 192.168.7.51
```

Beispiel:

```bash
PORT     STATE SERVICE     VERSION
21/tcp   open  ftp         vsftpd 2.3.4
22/tcp   open  ssh         OpenSSH 4.7p1 Debian 8ubuntu1 
8009/tcp open  ajp13       Apache Jserv (Protocol v1.3)
8180/tcp open  http        Apache Tomcat/Coyote JSP engine 1.1
```

**OS Erkennung:**
```bash
nmap -O 192.168.7.51

┌──(kali㉿kali)-[~]
└─$ nmap -O 192.168.7.51 
Starting Nmap 7.95 ( https://nmap.org ) at 2025-11-24 06:50 EST
Nmap scan report for 192.168.7.51
Host is up (0.00099s latency).
Not shown: 977 closed tcp ports (reset)
PORT     STATE SERVICE
21/tcp   open  ftp
22/tcp   open  ssh
23/tcp   open  telnet
25/tcp   open  smtp
53/tcp   open  domain
80/tcp   open  http
111/tcp  open  rpcbind
139/tcp  open  netbios-ssn
445/tcp  open  microsoft-ds
512/tcp  open  exec
513/tcp  open  login
514/tcp  open  shell
1099/tcp open  rmiregistry
1524/tcp open  ingreslock
2049/tcp open  nfs
2121/tcp open  ccproxy-ftp
3306/tcp open  mysql
5432/tcp open  postgresql
5900/tcp open  vnc
6000/tcp open  X11
6667/tcp open  irc
8009/tcp open  ajp13
8180/tcp open  unknown
MAC Address: 00:0C:29:3D:51:CE (VMware)
Device type: general purpose
Running: Linux 2.6.X
OS CPE: cpe:/o:linux:linux_kernel:2.6
OS details: Linux 2.6.9 - 2.6.33
Network Distance: 1 hop

OS detection performed. Please report any incorrect results at https://nmap.org/submit/ .
Nmap done: 1 IP address (1 host up) scanned in 5.19 seconds
 
```

**Aggressive Scan:**

```bash
nmap -A 192.168.7.51
```

**Timing/Speed:**

```bash
nmap -T4 192.168.8.51
```

**Ausgabe in Dateien:**

```bash
nmap -oN scan.txt 192.168.8.51
```

**die Option --reason:**

```bash
nmap --reason 192.168.8.51
```

**nur die N häufigsten Ports scannen (dokumentiere den Geschwindigkeitsgewinn):**

```bash
nmap --top-ports 100 192.168.8.51
```


**Was zeigt ein Portscan?**

- welche Ports auf einem System offen, geschlossen oder gefiltert sind  
- welche Dienste hinter den offenen Ports laufen  
- welche Versionen dieser Dienste verwendet werden  
- wie das Zielsystem auf Netzwerkpakete reagiert (z. B. Filter, Firewall)  
- mögliche Angriffspunkte oder Schwachstellen durch erreichbare Dienste  



## 2.4 Übung (nmap cheat sheet)

### Aufgabenstellung

Erstelle ein Cheat Sheet mit allen nmap Optionen die du verwendet hast und jenen die du für wichtig erachtest. Erstelle das cheat sheet so, dass es dir später als Nachschlagewerk dienen kann.


### nmap Cheat Sheet

```bash
nmap <IP>                 # Standardscan (Top 1000 Ports)
nmap -p- <IP>             # Alle Ports scannen (1–65535)
nmap --top-ports <N> <IP> # Die N häufigsten Ports prüfen
nmap -Pn <IP>             # Ohne Ping (wenn ICMP blockiert)
nmap -sV <IP>             # Dienste + Versionen erkennen
nmap -sC <IP>             # Standard-Skripte ausführen
nmap -sU <IP>             # UDP-Scan
nmap -O <IP>              # Betriebssystem erkennen
nmap -A <IP>              # Vollanalyse (OS, Version, Scripts)
nmap --reason <IP>        # Grund für Portstatus anzeigen
nmap -T4 <IP>             # Schnellerer Scan
nmap -oN scan.txt <IP>    # Ergebnis als Text speichern
```



